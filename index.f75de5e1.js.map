{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst tableBody = document.querySelector('tbody');\nconst list = [...tableBody.children];\n\nconst employees = list.map((item) => {\n  const cells = item.querySelectorAll('td');\n\n  return {\n    name: cells[0].textContent,\n    position: cells[1].textContent,\n    office: cells[2].textContent,\n    age: +cells[3].textContent,\n    salary: +cells[4].textContent.replace(/[$,]/g, ''),\n  };\n});\n\nconst tableHead = document.querySelector('thead');\n\nconst headerToPropertyMap = {\n  name: 'name',\n  position: 'position',\n  office: 'office',\n  age: 'age',\n  salary: 'salary',\n};\n\nconst currentSort = { column: '', direction: 'asc' };\n\ntableHead.addEventListener('click', function (e) {\n  const column = headerToPropertyMap[e.target.textContent.trim().toLowerCase()];\n\n  if (e.target.tagName !== 'TH') {\n    return;\n  }\n\n  if (currentSort.column === column) {\n    currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';\n  } else {\n    currentSort.column = column;\n    currentSort.direction = 'asc';\n  }\n\n  if (['name', 'position', 'office'].includes(column)) {\n    sortingByString(employees, column);\n  } else if (['age', 'salary'].includes(column)) {\n    sortingByNumber(employees, column);\n  }\n\n  updateTable();\n});\n\nfunction sortingByString(objects, type) {\n  return objects.sort((a, b) => {\n    const result = a[type].localeCompare(b[type]);\n\n    return currentSort.direction === 'asc' ? result : -result;\n  });\n}\n\nfunction sortingByNumber(objects, type) {\n  return objects.sort((a, b) => {\n    const result = a[type] - b[type];\n\n    return currentSort.direction === 'asc' ? result : -result;\n  });\n}\n\nfunction updateTable() {\n  tableBody.innerHTML = '';\n\n  employees.forEach((employee) => {\n    const row = document.createElement('tr');\n\n    row.innerHTML = `<td>${employee.name}</td><td>${employee.position}</td><td>${employee.office}</td><td>${employee.age}</td><td>$${employee.salary.toLocaleString()}</td>`;\n\n    tableBody.appendChild(row);\n  });\n}\n\nfunction activeRow(currentRow) {\n  const rows = document.querySelectorAll('tbody tr');\n\n  rows.forEach((row) => row.classList.remove('active'));\n  currentRow.classList.add('active');\n}\n\ntableBody.addEventListener('click', function (e) {\n  const tr = e.target.closest('tr');\n\n  if (!tr || !tableBody.contains(tr)) {\n    return;\n  }\n  activeRow(tr);\n});\n\nfunction createForm() {\n  const newForm = document.createElement('form');\n\n  newForm.classList.add('new-employee-form');\n\n  createInputs(newForm);\n  createSelect(newForm);\n  createButton(newForm);\n  setDataset(newForm);\n\n  document.body.appendChild(newForm);\n}\n\nfunction createInputs(someform) {\n  const keys = Object.keys(headerToPropertyMap);\n\n  for (let i = 0; i < keys.length; i++) {\n    if (keys[i] === 'office') {\n      continue;\n    }\n\n    if (keys[i] === 'age' || keys[i] === 'salary') {\n      someform.innerHTML += `<label>${keys[i][0].toUpperCase() + keys[i].slice(1)}: <input name=\"${keys[i]}\" type=\"number\"></label>`;\n    } else {\n      someform.innerHTML += `<label>${keys[i][0].toUpperCase() + keys[i].slice(1)}: <input name=\"${keys[i]}\" type=\"text\"></label>`;\n    }\n  }\n}\n\nconst offices = [\n  'Tokyo',\n  'Singapore',\n  'London',\n  'New York',\n  'Edinburgh',\n  'San Francisco',\n];\n\nfunction createSelect(someform) {\n  const selectElem = document.createElement('select');\n\n  selectElem.setAttribute('name', 'office');\n\n  for (const office of offices) {\n    const option = document.createElement('option');\n\n    option.setAttribute('value', office);\n    option.textContent = office;\n    selectElem.appendChild(option);\n  }\n\n  const label = document.createElement('label');\n\n  label.textContent = 'Office: ';\n  label.appendChild(selectElem);\n\n  const thirdElement = someform.children[2];\n\n  if (thirdElement) {\n    someform.insertBefore(label, thirdElement);\n  } else {\n    someform.appendChild(label);\n  }\n}\n\nfunction createButton(someform) {\n  const button = document.createElement('button');\n\n  button.textContent = 'Save to table';\n  button.setAttribute('type', 'submit');\n  button.setAttribute('data-qa', 'save-button');\n\n  someform.appendChild(button);\n}\n\nfunction setDataset(someform) {\n  Array.from(someform.elements).forEach((elem) => {\n    if (elem.name) {\n      elem.setAttribute('data-qa', elem.name);\n      elem.setAttribute('required', '');\n    }\n  });\n}\n\ncreateForm();\n\nconst submitButton = document.querySelector('button');\nconst form = document.querySelector('form');\n\nconst notificationInfo = {\n  warning: {\n    title: 'Warning!',\n    description: 'There is some empty fields, please enter all info',\n    type: 'warning',\n  },\n  error: {\n    title: 'Error!',\n    description:\n      'Please check, if your name is not less than 4 letters ' +\n      'and your age is not less than 18 or more than 90',\n    type: 'error',\n  },\n  success: {\n    title: 'Good job!',\n    description: 'You have added info about employeer',\n    type: 'success',\n  },\n};\n\nsubmitButton.addEventListener('click', function (e) {\n  e.preventDefault();\n\n  const data = getFormData(form);\n\n  const allFieldsFilled = Object.values(data).every(\n    (value) => value.trim() !== '',\n  );\n\n  if (!allFieldsFilled) {\n    pushNotification(\n      notificationInfo.warning.title,\n      notificationInfo.warning.description,\n      notificationInfo.warning.type,\n    );\n\n    return;\n  }\n\n  if (data.name.length < 4 || data.age < 18 || data.age > 90) {\n    pushNotification(\n      notificationInfo.error.title,\n      notificationInfo.error.description,\n      notificationInfo.error.type,\n    );\n\n    return;\n  }\n\n  const newRowInfo = document.createElement('tr');\n\n  newRowInfo.innerHTML = `<td>${data.name}</td><td>${data.position}</td><td>${data.office}</td><td>${data.age}</td><td>$${data.salary.toLocaleString()}</td>`;\n\n  tableBody.appendChild(newRowInfo);\n\n  form.reset();\n  employees.push(data);\n  updateTable();\n\n  pushNotification(\n    notificationInfo.success.title,\n    notificationInfo.success.description,\n    notificationInfo.success.type,\n  );\n});\n\nfunction getFormData(someform) {\n  const formData = {};\n\n  Array.from(someform.elements).forEach((element) => {\n    if (element.name) {\n      formData[element.name] = element.value;\n    }\n  });\n\n  return formData;\n}\n\nfunction pushNotification(title, description, type) {\n  const notificationDiv = document.createElement('div');\n\n  notificationDiv.setAttribute('data-qa', 'notification');\n\n  notificationDiv.classList.add('notification');\n\n  const titleOfDiv = document.createElement('h2');\n\n  titleOfDiv.classList.add('title');\n  titleOfDiv.textContent = title;\n\n  const parOfDiv = document.createElement('p');\n\n  parOfDiv.textContent = description;\n\n  notificationDiv.append(titleOfDiv);\n  notificationDiv.append(parOfDiv);\n\n  if (type === 'success') {\n    notificationDiv.classList.add('success');\n  } else if (type === 'error') {\n    notificationDiv.classList.add('error');\n  } else {\n    notificationDiv.classList.add('warning');\n  }\n\n  document.body.append(notificationDiv);\n\n  notificationDiv.style.transition = 'opacity 0.5s ease';\n  notificationDiv.style.opacity = '1';\n\n  setTimeout(() => {\n    notificationDiv.style.opacity = '0';\n\n    setTimeout(() => {\n      notificationDiv.remove();\n    }, 500);\n  }, 2000);\n}\n\nfunction changeInfo(cellInfo) {\n  const cellIndex = cellInfo.cellIndex;\n  const oldValue = cellInfo.textContent.trim();\n\n  let newElement;\n\n  if (cellIndex === 2) {\n    newElement = document.createElement('select');\n\n    offices.forEach((city) => {\n      const option = document.createElement('option');\n\n      option.value = city;\n      option.textContent = city;\n\n      if (city === oldValue) {\n        option.selected = true;\n      }\n\n      newElement.appendChild(option);\n    });\n  } else {\n    newElement = document.createElement('input');\n    newElement.type = cellIndex > 2 ? 'number' : 'text';\n    newElement.placeholder = oldValue;\n    newElement.value = oldValue;\n  }\n\n  cellInfo.textContent = '';\n  cellInfo.appendChild(newElement);\n  newElement.focus();\n\n  function saveChanges() {\n    const newValue = newElement.value.trim() || oldValue;\n\n    cellInfo.textContent = newValue;\n  }\n\n  newElement.addEventListener('blur', saveChanges);\n\n  newElement.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      saveChanges();\n    }\n  });\n}\n\ntableBody.addEventListener('dblclick', (e) => {\n  if (e.target.tagName === 'TD') {\n    changeInfo(e.target);\n  }\n});\n\nupdateTable();\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}